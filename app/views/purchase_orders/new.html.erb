<div class="row spacer">
	<div class="col-lg-12"><h1>New Purchase Order</h1></div>
</div>
<div class="row spacer">
	<%= simple_form_for @purchase_order, defaults: { wrapper: :side_by_side }, html: { class: 'form-horizontal' } do |f| %>
		<div class="row">
			<div class="col-lg-6">
				<%= f.input :number, label: "PO Number" %>
				<%= f.input :vendor_id, :collection => Vendor.order(:name).map { |v| [v.name, v.id] }, 
															include_blank: "Select Vendor", class: "form-control" %>
				<script type="text/javascript">
					$("#purchase_order_vendor_id").change(function(){
						$("#project-select-spinner").removeClass("hidden");
						$.ajax({
							url: "/projects.js?vendor_id=" + $(this).val(),
							dataType: "script"
						});
					});
				</script>
				<div class="form-group">
					<label class="col-xs-4 control-label bold" for="wine_shipment_ship_date">Order Date</label>
					<div class="col-xs-8">
						<div class="input-group date" id="date-picker">
							<%= f.input_field :order_date, as: :string, class: "form-control" %>
							<span class="input-group-addon">
								<span class="glyphicon glyphicon-calendar"></span>
							</span>
						</div>
					</div>
					<script type="text/javascript">
						$(function () {
							$("#date-picker").datetimepicker({
								format: "MM/DD/YY"
							});
						});
					</script>
				</div>
				<%= f.button :submit, class: "col-xs-4 col-xs-offset-4 spacer" %>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<%= f.fields_for :line_items, @purchase_order.line_items do |line_item| %>
					<div class="form-group">
						<label class="col-lg-2 control-label bold" for="purchase_order_line_items_attributes_0_project_id">Project</label>
						<div class="col-xs-4">
							<%= render partial: 'select_project_from_vendor', locals: { line_item: line_item } %>
						</div>
						<span class="fa fa-spinner fa-spin text-muted hidden inline-spinner" id="project-select-spinner"></span>
					</div>
				<% end %>
			</div>
		</div>
	<% end %>
</div>